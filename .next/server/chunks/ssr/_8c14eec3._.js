module.exports=[66718,7827,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e],66718);var f=c.createContext(void 0);function g(a){let b=c.useContext(f);return a||b||"ltr"}a.s(["useDirection",()=>g],7827)},15618,a=>{"use strict";let b=(0,a.i(70106).default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>b],15618)},91119,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(68114);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c})).displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},51538,a=>{"use strict";var b=a.i(87924),c=a.i(68114);function d({title:a,description:d,children:e,className:f}){return(0,b.jsxs)("div",{className:(0,c.cn)("flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",f),children:[(0,b.jsxs)("div",{className:"space-y-1",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold font-display tracking-tight",children:a}),d&&(0,b.jsx)("p",{className:"text-muted-foreground",children:d})]}),e&&(0,b.jsx)("div",{className:"flex items-center gap-2",children:e})]})}a.s(["PageHeader",()=>d])},92e3,a=>{"use strict";let b=(0,a.i(70106).default)("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);a.s(["AlertCircle",()=>b],92e3)},54813,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(38246),e=a.i(51538),f=a.i(99570),g=a.i(66718),h=a.i(97503),i=a.i(91675),j=a.i(68114);let k=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("div",{className:"relative w-full overflow-auto",children:(0,b.jsx)("table",{ref:d,className:(0,j.cn)("w-full caption-bottom text-sm",a),...c})}));k.displayName="Table";let l=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("thead",{ref:d,className:(0,j.cn)("[&_tr]:border-b",a),...c}));l.displayName="TableHeader";let m=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tbody",{ref:d,className:(0,j.cn)("[&_tr:last-child]:border-0",a),...c}));m.displayName="TableBody",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tfoot",{ref:d,className:(0,j.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...c})).displayName="TableFooter";let n=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("tr",{ref:d,className:(0,j.cn)("border-b transition-colors data-[state=selected]:bg-muted hover:bg-muted/50",a),...c}));n.displayName="TableRow";let o=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("th",{ref:d,className:(0,j.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...c}));o.displayName="TableHead";let p=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("td",{ref:d,className:(0,j.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...c}));p.displayName="TableCell",c.forwardRef(({className:a,...c},d)=>(0,b.jsx)("caption",{ref:d,className:(0,j.cn)("mt-4 text-sm text-muted-foreground",a),...c})).displayName="TableCaption";var q=a.i(80701),r=a.i(91119),s=a.i(74167),t=a.i(11642),u=a.i(15618),v=a.i(70106);let w=(0,v.default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),x=(0,v.default)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),y=(0,v.default)("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]),z=(0,v.default)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var A=a.i(11300),B=a.i(96221),C=a.i(72228);function D(){let{user:a,role:j}=(0,t.useAuth)(),[v,D]=(0,c.useState)([]),[E,F]=(0,c.useState)([]),[G,H]=(0,c.useState)(!0),[I,J]=(0,c.useState)(""),[K,L]=(0,c.useState)("all"),[M,N]=(0,c.useState)("date");(0,c.useEffect)(()=>{O()},[a,j]);let O=async()=>{H(!0);let{data:b}=await s.supabase.from("service_request_statuses").select("id, name").order("sequence");b&&F(b);let c=s.supabase.from("service_requests").select(`
        id,
        request_no,
        request_datetime,
        title,
        description,
        priority_level,
        status:service_request_statuses(id, name),
        service_request_type:service_request_types(
          id,
          name,
          department:service_departments(id, name)
        )
      `).order("request_datetime",{ascending:!1});"requestor"===j?c=c.eq("requester_id",a?.id):"technician"===j&&(c=c.eq("assigned_to_user_id",a?.id));let{data:d,error:e}=await c;e?console.error("Error fetching requests:",e):D(d||[]),H(!1)},P=[...v.filter(a=>{let b=a.title.toLowerCase().includes(I.toLowerCase())||a.request_no.toLowerCase().includes(I.toLowerCase())||a.service_request_type?.department?.name?.toLowerCase().includes(I.toLowerCase()),c="all"===K||a.status?.id===K;return b&&c})].sort((a,b)=>{if("date"===M)return new Date(b.request_datetime).getTime()-new Date(a.request_datetime).getTime();let c={High:0,Medium:1,Low:2};return(c[a.priority_level]||2)-(c[b.priority_level]||2)});return(0,b.jsxs)("div",{className:"space-y-6 animate-fade-in",children:[(0,b.jsx)(e.PageHeader,{title:"requestor"===j?"My Requests":"All Requests",description:"View and manage service requests",children:"requestor"===j&&(0,b.jsx)(f.Button,{asChild:!0,className:"gap-2 gradient-primary shadow-glow",children:(0,b.jsxs)(d.default,{href:"/requests/new",children:[(0,b.jsx)(u.Plus,{className:"h-4 w-4"}),"New Request"]})})}),(0,b.jsx)(r.Card,{children:(0,b.jsx)(r.CardContent,{className:"pt-6",children:(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,b.jsxs)("div",{className:"relative flex-1",children:[(0,b.jsx)(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,b.jsx)(g.Input,{placeholder:"Search by title, request no, or department...",value:I,onChange:a=>J(a.target.value),className:"pl-9"})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(q.Select,{value:K,onValueChange:L,children:[(0,b.jsxs)(q.SelectTrigger,{className:"w-[160px]",children:[(0,b.jsx)(x,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(q.SelectValue,{placeholder:"Status"})]}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"all",children:"All Statuses"}),E.map(a=>(0,b.jsx)(q.SelectItem,{value:a.id,children:a.name},a.id))]})]}),(0,b.jsxs)(q.Select,{value:M,onValueChange:a=>N(a),children:[(0,b.jsxs)(q.SelectTrigger,{className:"w-[140px]",children:[(0,b.jsx)(y,{className:"h-4 w-4 mr-2"}),(0,b.jsx)(q.SelectValue,{})]}),(0,b.jsxs)(q.SelectContent,{children:[(0,b.jsx)(q.SelectItem,{value:"date",children:"By Date"}),(0,b.jsx)(q.SelectItem,{value:"priority",children:"By Priority"})]})]})]})]})})}),(0,b.jsx)(r.Card,{children:(0,b.jsxs)(r.CardContent,{className:"p-0",children:[G?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsx)(B.Loader2,{className:"h-8 w-8 animate-spin text-primary"})}):(0,b.jsxs)(k,{children:[(0,b.jsx)(l,{children:(0,b.jsxs)(n,{children:[(0,b.jsx)(o,{className:"w-[130px]",children:"Request No"}),(0,b.jsx)(o,{children:"Title"}),(0,b.jsx)(o,{className:"hidden md:table-cell",children:"Department"}),(0,b.jsx)(o,{className:"hidden sm:table-cell",children:"Date"}),(0,b.jsx)(o,{children:"Status"}),(0,b.jsx)(o,{children:"Priority"}),(0,b.jsx)(o,{className:"w-[80px]"})]})}),(0,b.jsx)(m,{children:P.map(a=>(0,b.jsxs)(n,{className:"group",children:[(0,b.jsx)(p,{className:"font-mono text-sm",children:a.request_no}),(0,b.jsx)(p,{children:(0,b.jsxs)("div",{className:"max-w-[300px]",children:[(0,b.jsx)("p",{className:"font-medium truncate",children:a.title}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground truncate md:hidden",children:a.service_request_type?.department?.name})]})}),(0,b.jsx)(p,{className:"hidden md:table-cell text-muted-foreground",children:a.service_request_type?.department?.name}),(0,b.jsx)(p,{className:"hidden sm:table-cell text-muted-foreground",children:(0,C.format)(new Date(a.request_datetime),"MMM d, yyyy")}),(0,b.jsx)(p,{children:(0,b.jsx)(h.StatusBadge,{status:a.status?.name||"Pending"})}),(0,b.jsx)(p,{children:(0,b.jsx)(i.PriorityBadge,{priority:a.priority_level,showIcon:!1})}),(0,b.jsx)(p,{children:(0,b.jsx)(f.Button,{variant:"ghost",size:"icon",asChild:!0,className:"opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(d.default,{href:`/requests/${a.id}`,children:(0,b.jsx)(z,{className:"h-4 w-4"})})})})]},a.id))})]}),!G&&0===P.length&&(0,b.jsxs)("div",{className:"text-center py-12",children:[(0,b.jsx)(A.ClipboardList,{className:"h-12 w-12 mx-auto text-muted-foreground/50 mb-3"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"No requests found"}),"requestor"===j&&(0,b.jsx)(f.Button,{asChild:!0,variant:"link",className:"mt-2",children:(0,b.jsx)(d.default,{href:"/requests/new",children:"Create your first request"})})]})]})})]})}a.s(["default",()=>D],54813)}];

//# sourceMappingURL=_8c14eec3._.js.map